---
title: "pixi.jsのshaderで遊ぶ"
date: "2021-06-05"
avatar: './pixijs.png'
---

# shaderのfilterの基本

## vertex shaderとfragmentshaderがある。


```javascript
const fragment = `
    precision mediump float;//精度修飾子(どのくらいの精度でデータを扱うかを指定する)

    void main(){
        // 引数はRGBとα値
        gl_FragColor = vec4(1.0,1.0,1.0,0.5);
    }
`;
const myFilter = new PIXI.Filter(null, fragment, {});
app.stage.filters = [myFilter];
//以下のように後から追加設定が可能
//app.stage.filters.push(blurFilter);
```

# backgroundに色を塗る
```javascript
const fragment = `
    precision mediump float;//精度修飾子(どのくらいの精度でデータを扱うかを指定する)
    void main(){
        // 引数はRGBとα値。
        vec4(0.5,0.5,0.5,0.0);
    }
`;
```


# backgroundに色を塗る
pixi.jsではvTextureCoordとuSamplerレンダリング情報が入っているので、
そこに赤を指定する。
```javascript
const fragment = `
    //精度修飾子(どのくらいの精度でデータを扱うかを指定する)
    precision mediump float;

    // テクスチャの座標（内部変数）
    varying vec2 vTextureCoord; 

    // フィルターを適用したテクスチャ画像（内部変数）
    uniform sampler2D uSampler;

    void main(){
        vec4 color = texture2D(uSampler, vTextureCoord);
        color.r = 0.5;
        gl_FragColor = color;
    }
`;
```

# グラデーションをつける。
組み込み変数 gl_FragCoord を介して、シェーダーが実行されているピクセルにアクセスできます。
```javascript
const fragment = `
    varying vec2 vTextureCoord;
    uniform sampler2D uSampler;

    void main(){
        vec4 color = texture2D(uSampler, vTextureCoord);
        color.r = gl_FragCoord.x/1000.0;
        gl_FragColor = color;
    }
`;
```


# てきすちゃを重ねて描画する。
https://jsfiddle.net/wzz7agmt/1/










